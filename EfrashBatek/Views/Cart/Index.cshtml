@{
    Layout = "CustomerLayout";
}
<link rel="stylesheet" href="~/css/cart2.css">
}
@model List<Cart_Item>


<main>
    @if(Model != null)
    {

        <div class="basket">

            <div class="basket-labels">
                <ul>
                    <li class="item item-heading">Item</li>
                    <li class="price">Price</li>
                    <li class="quantity">Quantity</li>
                    <li class="subtotal">Subtotal</li>
                </ul>
            </div>
            @foreach (var item in Model)
            {
            <div class="basket-product">
                <div class="item">
                    <div class="product-image">
                            <img src="~/Image/products/@item.itemData.image" alt="Mens Winter Leathers Jackets"
                                 width="300" class="product-img hover">
                    </div>
                    <div class="product-details">
                        <h1><strong><span class="item-quantity"></span> @item.itemData.Name</strong></h1>

                    </div>
                </div>
                <div class="price">@item.itemData.price</div>
                <div class="quantity">


                        <input type="number" value=@item.Quantity min="1" class="quantity-field" style="background-color: #ffff; text-align: center;">

                </div>
                
                <div class="subtotal"></div>
  

                    @using (Html.BeginForm("RemoveFromCart", "Cart", FormMethod.Post))
                    {
                        @Html.Hidden("id", item.ItemID)
                        // Replace "Id" with the actual name of the ID property in your model
                        <div class="remove">
                            <button>Remove</button>
                        </div>
                    }

                   
            </div>
            }


        </div>
        <aside>
            <div class="summary">
                <div class="summary-total-items">
                    <span class="total-items"></span> Order Summary
                </div>
                <div class="summary-subtotal">
                    <div class="subtotal-title">item prices</div>
                    <div class="subtotal-value final-value" id="basket-subtotal">130.00</div>
                    <!-- <div class="summary-promo hide">
                      <div class="promo-title">Promotion</div>
                      <div class="promo-value final-value" id="basket-promo"></div>
                    </div> -->
                </div>
                <!-- <div class="summary-delivery">

                </div> -->
                <div class="summary-total">
                    <div class="total-title">Total</div>
                    <div class="total-value final-value" id="basket-total">130.00</div>
                </div>
                <div class="summary-checkout">
                    <a href="orderinfo.html"><button class="checkout-cta">Go to Secure Checkout</button></a>
                </div>
            </div>
        </aside>


    }
    else
    {

        <center>
            <br>
            <br>
            <br>
            <br>
            <img src="~/Image/img2.png">
            <br>
            <br>
            <h4>You Cart is Empty ! </h4>
            <br>
            <a href="main.html"> <buttton>Go shopping </buttton>  </a>
        </center>
    }

</main>


       <script>


    $(document).ready(function () {
        $('.quantity-field').change(function () {
            var itemId = $(this).data('item-id');
            var newQuantity = $(this).val();

            //Send request to update quantity in database
            $.ajax({
                url: '/Item/UpdateQuantity',
                method: 'POST',
                data: { itemId: itemId, newQuantity: newQuantity },
                success: function (result) {
                    //Handle success response
                },
                error: function (error) {
                    //Handle error response
                }
            });
        });
    });
       </script>